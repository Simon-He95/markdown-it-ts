# 性能报告（最新一次）

| 字数 | S1 一次 | S2 一次 | S3 一次 | S4 一次 | S5 一次 | M1 一次 | S1 追加 | S2 追加 | S3 追加 | S4 追加 | S5 追加 | M1 追加 |
|---:|---:|---:|---:|---:|---:|---:|---:|---:|---:|---:|---:|---:|
| 5000 | 6.84ms | 0.87ms | 0.76ms | 1.22ms | **0.44ms** | 4.97ms | 3.99ms | 1.04ms | **0.74ms** | 1.39ms | 1.13ms | 2.84ms |
| 20000 | 2.14ms | 1.02ms | 1.03ms | 1.39ms | **0.93ms** | 2.00ms | 6.00ms | **1.80ms** | 3.09ms | 6.18ms | 3.76ms | 4.82ms |
| 50000 | 2.74ms | 2.45ms | **2.42ms** | 3.19ms | 3.01ms | 3.92ms | 14.71ms | **2.60ms** | 3.86ms | 12.76ms | 9.01ms | 10.29ms |
| 100000 | 6.15ms | 6.71ms | 6.03ms | 11.36ms | **5.87ms** | 5.87ms | 21.21ms | 21.62ms | 24.65ms | 26.00ms | 20.20ms | **17.24ms** |

各规模下的最佳（一次性）：
- 5000: S5 0.44ms（流式 关闭, 纯全量）
- 20000: S5 0.93ms（流式 关闭, 纯全量）
- 50000: S3 2.42ms（流式 开启, 开启缓存, 开启分块(混合)）
- 100000: S5 5.87ms（流式 关闭, 纯全量）

各规模下的最佳（追加工作负载）：
- 5000: S3 0.74ms（流式 开启, 开启缓存, 开启分块(混合)）
- 20000: S2 1.80ms（流式 开启, 开启缓存, 关闭分块）
- 50000: S2 2.60ms（流式 开启, 开启缓存, 关闭分块）
- 100000: M1 17.24ms（markdown-it（基线））

推荐（按不同规模的多数投票）：
- 一次性：S5(3)、S3(1)
- 追加编辑：S2(2)、S3(1)、M1(1)

说明：当使用同一个 env 对象时，S2/S3 的 `appendHits` 应为 5（每次追加都会命中快路径）。

## markdown-it-ts 最佳 vs markdown-it（基线）

| 字数 | TS 最佳（一次） | 基线（一次） | 一次比例 | TS 最佳（追加） | 基线（追加） | 追加比例 | TS 场景（一次/追加） |
|---:|---:|---:|---:|---:|---:|---:|:--|
| 5000 | 0.44ms | 4.97ms | 0.09x | 0.74ms | 2.84ms | 0.26x | S5/S3 |
| 20000 | 0.93ms | 2.00ms | 0.46x | 1.80ms | 4.82ms | 0.37x | S5/S2 |
| 50000 | 2.42ms | 3.92ms | 0.62x | 2.60ms | 10.29ms | 0.25x | S3/S2 |
| 100000 | 5.87ms | 5.87ms | 1.00x | 20.20ms | 17.24ms | 1.17x | S5/S5 |

- 一次比例 < 1.00 表示 markdown-it-ts（最佳一次）快于基线。
- 追加比例 < 1.00 表示流式缓存快路径的优势。